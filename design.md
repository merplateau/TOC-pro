# PDF 阅读器 Electron 应用 - UI/UX 设计文档

## 设计理念

**极简主义 + 苹果风格**
- 减少视觉噪音，突出核心功能
- 流畅的动画和过渡效果
- 直观的手势和交互
- 清晰的层级结构
- 优雅的留白和排版

## 核心功能模块

### 1. 主界面（PDF 预览区）
**设计重点：**
- 全屏或大面积 PDF 预览（左右滑动浏览）
- 顶部：极简工具栏（半透明悬浮）
  - 左侧：文件名显示
  - 右侧：设置按钮、目录按钮
- 底部：页码指示器（小圆点或数字）
- 侧边栏（可收起）：缩略图预览

**交互逻辑：**
- 键盘左右箭头切换页面
- 鼠标滚轮/触控板滑动切换
- 点击页面边缘快速翻页
- 双击放大/缩小

### 2. 目录面板（侧边抽屉）
**设计重点：**
- 从右侧滑入的抽屉式面板
- 树形结构展示目录层级
  - 可折叠/展开子项
  - 缩进表示层级关系
  - 点击跳转到对应页面
- 底部操作区：
  - "识别目录"按钮
  - "编辑目录"按钮
  - "导出 PDF"按钮

**交互逻辑：**
- 点击目录按钮或快捷键（Cmd+T）打开
- 点击遮罩层或 ESC 关闭
- 拖拽调整顺序
- 右键菜单：编辑、删除、添加子项

### 3. 目录编辑模态框
**设计重点：**
- 居中的模态对话框
- 表格形式编辑目录条目
  - 标题、页码、层级
  - 行内编辑
  - 拖拽排序
- 底部操作：
  - "添加条目"
  - "导入 JSON"
  - "导出 JSON"
  - "保存"/"取消"

### 4. 设置页面（独立页面）
**设计重点：**
- 从主界面滑入的全屏设置页
- 分组设置项：
  - **API 配置**
    - API Key（密码输入框）
    - 模型选择（固定显示）
    - API 地址（固定显示）
    - "测试连接"按钮
  - **页码偏移**
    - 印刷页码输入
    - 对应 PDF 页码输入
    - 自动计算偏移量
  - **应用设置**
    - 主题选择（浅色/深色）
    - 默认缩放比例
    - 自动保存设置
- 顶部：返回按钮 + 标题

**交互逻辑：**
- 点击设置按钮打开
- 点击返回或 ESC 关闭
- 自动保存配置到本地

### 5. 分割功能（简化为快捷操作）
**设计重点：**
- 选中页面范围后，右键菜单显示"导出选中页面"
- 或顶部工具栏显示"导出"按钮（仅在选中页面时显示）

**交互逻辑：**
- 点击页面选中（高亮显示）
- Shift+点击选择范围
- Cmd+A 全选
- 导出时弹出文件名输入对话框

## 布局结构

```
┌─────────────────────────────────────────────────────────┐
│  [文件名]                              [目录] [设置]    │ ← 顶部工具栏
├─────────────────────────────────────────────────────────┤
│                                                         │
│                                                         │
│                    PDF 预览区域                         │
│                 （左右滑动浏览）                        │
│                                                         │
│                                                         │
├─────────────────────────────────────────────────────────┤
│                    ●●○●●                                │ ← 页码指示器
└─────────────────────────────────────────────────────────┘
                                                    │
                                                    └─→ 目录抽屉（右侧滑入）
```

## 颜色方案（macOS 风格）

### 浅色模式
- 背景：#FFFFFF
- 次要背景：#F5F5F7
- 文字：#1D1D1F
- 次要文字：#86868B
- 强调色：#007AFF（系统蓝）
- 边框：#D2D2D7

### 深色模式
- 背景：#1C1C1E
- 次要背景：#2C2C2E
- 文字：#FFFFFF
- 次要文字：#98989D
- 强调色：#0A84FF
- 边框：#38383A

## 动画效果

- 页面切换：淡入淡出 + 轻微位移（200ms ease-out）
- 抽屉滑入：从右侧滑入（300ms cubic-bezier）
- 按钮悬停：轻微放大（150ms ease-out）
- 模态框：背景模糊 + 淡入（200ms）

## 快捷键

- `Cmd+O`：打开文件
- `Cmd+T`：打开/关闭目录
- `Cmd+,`：打开设置
- `Cmd+E`：导出选中页面
- `←/→`：上一页/下一页
- `Cmd+[/]`：缩小/放大
- `Cmd+0`：重置缩放
- `ESC`：关闭当前面板/对话框

## 技术实现要点

### 内存管理
1. 虚拟滚动：只渲染可见页面及前后各2页
2. 图片懒加载：离屏页面使用低分辨率缩略图
3. 及时释放：切换文件时清理旧文档的所有引用
4. Canvas 复用：使用对象池管理 Canvas 元素

### 本地化
1. PDF 解析：使用 PDF.js（本地）
2. PDF 操作：使用 pdf-lib（本地）
3. 数据存储：使用 electron-store（本地配置文件）
4. API 调用：仅在识别目录时调用外部 API

### Electron 配置
1. 主进程：文件系统操作、窗口管理
2. 渲染进程：UI 渲染、PDF 预览
3. IPC 通信：安全的进程间通信
4. 无 Node.js 集成：渲染进程使用 preload 脚本
