# PDF Reader Pro - 使用指南

## 快速开始

### 1. 安装依赖

```bash
cd pdf-reader-redesign
pnpm install
```

### 2. 启动应用

```bash
pnpm start
```

### 3. 配置 API Key

首次使用目录识别功能时，需要配置 API Key：

1. 点击工具栏右上角的设置按钮（齿轮图标）
2. 在"API 配置"部分输入您的 API Key：`6b761a23-6613-4f9e-9830-2fc2d2353aa1`
3. 点击"测试连接"验证配置是否正确
4. 配置会自动保存到本地

## 核心功能使用

### 打开 PDF 文件

**方式一：点击按钮**
- 在欢迎页面点击"打开 PDF 文件"按钮
- 选择要打开的 PDF 文件

**方式二：拖拽文件**
- 直接将 PDF 文件拖拽到欢迎页面

**方式三：快捷键**
- 按 `Cmd+O` 打开文件选择对话框

### 浏览 PDF 页面

- **键盘导航**：使用左右箭头键切换页面
- **鼠标导航**：点击页码指示器的左右按钮
- **页码显示**：底部中央显示当前页码和总页数

### 使用目录功能

#### 查看目录

1. 打开 PDF 文件后，点击工具栏的目录按钮（列表图标）
2. 或按快捷键 `Cmd+T`
3. 目录抽屉从右侧滑入
4. 点击目录项可快速跳转到对应页面

#### 识别目录

**自动识别（推荐）**

1. 打开目录抽屉
2. 点击"识别目录"按钮
3. 系统会自动提取 PDF 前 10 页的内容
4. 调用 AI 模型识别目录结构
5. 识别完成后，目录会自动显示在抽屉中

**注意事项**：
- 首次使用需要先在设置中配置 API Key
- 识别过程可能需要 10-30 秒，取决于网络状况
- AI 识别的准确性取决于 PDF 的格式和内容质量
- 建议识别后手动检查和调整

#### 编辑目录

1. 在目录抽屉中点击"编辑目录"按钮
2. 在弹出的编辑窗口中可以：
   - **添加条目**：点击"添加条目"按钮
   - **修改内容**：直接在表格中编辑标题、页码和层级
   - **删除条目**：点击每行的"删除"按钮
   - **导入 JSON**：从文件导入目录数据
   - **导出 JSON**：将目录数据导出为 JSON 文件
3. 编辑完成后点击"保存"

**字段说明**：
- **标题**：目录项的名称
- **页码**：印刷页码（书中标注的页码）
- **层级**：1 表示一级标题，2 表示二级标题，以此类推

#### 导出带目录的 PDF

1. 确保已经识别或编辑了目录
2. 在目录抽屉中点击"导出 PDF"按钮
3. 选择保存位置和文件名
4. 导出的 PDF 文件将包含完整的目录结构
5. 在 PDF 阅读器中可以看到左侧的目录树

### 页码偏移设置

如果 PDF 的印刷页码与实际 PDF 页码不一致（例如封面、前言等），需要配置页码偏移：

1. 打开设置页面（点击设置按钮或按 `Cmd+,`）
2. 在"页码偏移"部分：
   - **印刷页码**：输入书中标注的页码（例如：1）
   - **对应 PDF 页码**：输入该页在 PDF 中的实际页码（例如：15）
3. 系统会自动计算偏移量（例如：15 - 1 = 14）
4. 在导出 PDF 时，目录页码会自动应用偏移量

**示例**：
- 书中第 1 页对应 PDF 第 15 页
- 偏移量 = 15 - 1 = 14
- 目录中"第一章"标注为第 10 页
- 导出时会自动转换为 PDF 第 24 页（10 + 14）

## 快捷键列表

| 快捷键 | 功能 |
|--------|------|
| `Cmd+O` | 打开文件 |
| `Cmd+T` | 打开/关闭目录 |
| `Cmd+,` | 打开设置 |
| `←` | 上一页 |
| `→` | 下一页 |
| `ESC` | 关闭当前面板 |

## 常见问题

### Q: 为什么无法识别目录？

**A:** 可能的原因和解决方法：

1. **未配置 API Key**
   - 在设置中配置 API Key
   - 点击"测试连接"验证

2. **网络连接问题**
   - 检查网络连接
   - 确认可以访问火山引擎服务

3. **PDF 格式问题**
   - 确保 PDF 包含可提取的文本内容
   - 扫描版 PDF 可能无法识别

4. **API 调用限制**
   - 检查 API Key 是否有效
   - 确认是否超出调用次数限制

### Q: 识别的目录不准确怎么办？

**A:** 可以手动编辑目录：

1. 点击"编辑目录"按钮
2. 修改不准确的标题、页码或层级
3. 删除错误的条目
4. 添加遗漏的条目
5. 保存后重新导出

### Q: 导出的 PDF 没有目录？

**A:** 请检查：

1. 是否已经识别或编辑了目录
2. 目录项的页码是否在有效范围内
3. 是否应用了正确的页码偏移

### Q: 如何备份目录数据？

**A:** 两种方式：

1. **导出 JSON**：在编辑窗口点击"导出 JSON"
2. **保存 PDF**：导出带目录的 PDF 文件

### Q: 应用占用内存过高？

**A:** 应用已实现内存优化：

1. 切换文件时自动清理旧文档
2. Canvas 对象池复用
3. 及时释放页面对象

如果仍然占用过高，可以：
- 关闭应用重新打开
- 处理完一个文件后再打开下一个

## 技术限制

1. **API 调用次数**：测试 API Key 限制为 5 次调用，请谨慎使用
2. **文件大小**：建议处理 100MB 以下的 PDF 文件
3. **页面数量**：目录识别仅分析前 10 页内容
4. **网络依赖**：目录识别功能需要网络连接

## 数据安全

1. **本地处理**：除目录识别外，所有操作完全在本地进行
2. **不上传文件**：PDF 文件不会上传到服务器
3. **配置存储**：API Key 存储在本地配置文件中
4. **隐私保护**：不收集任何用户数据

## 获取帮助

如遇到问题或需要帮助，请：

1. 查看本使用指南
2. 查看 README.md 文档
3. 检查控制台错误信息（开发模式）
4. 提交 Issue 到项目仓库

## 更新日志

### v1.0.0 (2026-02-01)

- ✅ 极简 UI 设计
- ✅ PDF 预览和浏览
- ✅ AI 智能目录识别
- ✅ 层级化目录管理
- ✅ 页码偏移设置
- ✅ 目录导出功能
- ✅ 内存优化管理
- ✅ 快捷键支持
- ✅ 本地配置存储
